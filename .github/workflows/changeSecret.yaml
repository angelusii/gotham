# This is a basic workflow that is manually triggered

name: ChangeSecret

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:
  workflow_dispatch:
    # Inputs the workflow accepts.
    inputs:
      Org:
        type: choice
        description: Org where to run
        required: true
        options:
        - PROD
        - INT
        - DEV


jobs:
  SelectEnvironment:
    runs-on: ubuntu-latest #zmÄ›nit na csas-linux
    environment:
     name: ${{inputs.Org}}
    env:
      SFC_ORG: ${{ inputs.Org }} 
      SFC_SCRIPT: ${{ inputs.ScriptName }}

    steps:
    - name: Set environment
      id: set-secrets-file
      run: |
        if [ "${SFC_ORG}" == "PROD" ]; then
         echo "SF_AUTH_FILE=${{ secrets.SECRETS_FILE_PROD}}" >> $GITHUB_ENV
        elif [ "${SFC_ORG}" == "INT" ]; then
         echo "SF_AUTH_FILE=${{ secrets.SECRETS_FILE_INT}}" >> $GITHUB_ENV
        elif [ "${SFC_ORG}" == "DEV" ]; then
         echo "SF_AUTH_FILE=${{ secrets.SECRETS_FILE_DEV}}" >> $GITHUB_ENV
        fi

    - name: Use the secrets file
      run:  echo "Using secrets file ${{ env.SF_AUTH_FILE }}"
