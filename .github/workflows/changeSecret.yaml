# This is a basic workflow that is manually triggered

name: ChangeSecret

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:
  workflow_dispatch:
    # Inputs the workflow accepts.
    inputs:
      Org:
        type: choice
        description: Org where to run
        required: true
        options:
        - PROD
        - INT
        - DEV


jobs:
  SelectEnvironment:
    runs-on: ubuntu-latest #zmÄ›nit na csas-linux
    environment:
     name: ${{inputs.Org}}
    env:
      SF_AUTH_FILE: ${{ secrets.SF_AUTH_FILE }}
      SFC_ORG: ${{ inputs.Org }} 
      SFC_SCRIPT: ${{ inputs.ScriptName }}

    steps:
    - name: Set environment
      id: set-secrets-file
      run: |
        if [ "${SFC_ORG}" == "PROD" ]; then
         echo "secrets_file=secrets.file_dev" >> $SF_AUTH_FILE
        elif [ "${SFC_ORG}" == "INT" ]; then
         echo "secrets_file=secrets.file_prod" >> $SF_AUTH_FILE
        elif [ "${SFC_ORG}" == "DEV" ]; then
         echo "secrets_file=secrets.file_default" >> $SF_AUTH_FILE
        fi

    - name: Use the secrets file
      run:  echo "Using secrets file ${SF_AUTH_FILE}"
